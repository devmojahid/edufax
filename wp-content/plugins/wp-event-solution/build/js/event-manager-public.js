(()=>{"use strict";const e=window.wp.i18n;function t(e){const t=window.jspdf.jsPDF,n=document.getElementById("etn_attendee_details_to_print").innerHTML,a=new t("p","pt","a4"),i=e.target.dataset.ticketname,r="<div class='etn-ticket-pdf-wrapper' style='padding: 05px 15px; width:575px;height: 820px; margin: auto;'>"+n+"</div>";a.html(r,{callback:function(){a.save(i)},x:10,y:10})}jQuery(document).ready((function(n){var a=n(".etn-countdown-wrap");function i(e){var t=null;return n(e).find("input").each((function(){var e=n(this);if("required"===e.attr("data-etn_required")&&("checkbox"===e.attr("type")||"radio"===e.attr("type")))return t="input[name='"+e.attr("name")+"']",!1})),t}function r(e){var t=e?["input[name='name']","input[name='email']","input[name='phone']"]:["input[name='attendee_name[]']","input[name='attendee_email[]']","input[name='attendee_phone[]']"];if(n(".etn-attendee-extra-fields").length>0){var a=[];if(t=[],n("input:not(:submit,:hidden)").each((function(){a.push({name:this.name,value:this.value})})),n(".etn-checkbox-field-wrap").length>0&&n(".etn-checkbox-field-wrap").find("input").each((function(e){const a=i(n(this).parent());t.push(a)})),n(".etn-radio-field-wrap").length>0){const e=i(".etn-radio-field-wrap");t.push(e)}a.length>0&&a.map((function(e){var a=n("input[name='"+e.name+"']");"required"==a.attr("required")&&"hidden"!==a.attr("type")&&t.push("input[name='"+e.name+"']")}))}return t}function s(t,a){var i=[];n.each(t,(function(t,r){var s=n(r);switch(s.attr("type")){case"text":case"email":case"tel":case"number":case"date":void 0!==s.val()&&""!=s.val()||(s.addClass("attendee_error"),i.push(r));break;case"radio":case"checkbox":s.is('[data-etn_required="required"]')&&!s.is(":checked")&&(s.addClass("attendee_error"),i.push(r))}n(".attende_form").on("keyup change",r,(function(){var t=n(this),i=t.attr("type"),s=t.attr("id"),d=function(t,a,i=""){var r={error_type:"no_error",message:"success"};switch("radio"!==t||"checkbox"!==t?0==a.length?n(this).addClass("attendee_error"):n(this).removeClass("attendee_error"):n(i).is(":checked")?"radio"==t?n(this).parents(".etn-radio-field-wrap").find(".etn-attendee-extra-fields").removeClass("attendee_error"):"checkbox"==t&&n(this).parents(".etn-checkbox-field-wrap").find(".etn-attendee-extra-fields").removeClass("attendee_error"):n(this).addClass("attendee_error"),t){case"email":const t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;0!==a.length?0==t.test(String(a).toLowerCase())&&(r.error_type="not-valid",r.message=(0,e.__)("Email is not valid","eventin")):(r.error_type="empty",r.message=(0,e.__)("Please enter email address","eventin"));break;case"tel":0===a.length?(r.error_type="empty",r.message=(0,e.__)("Please fill the field","eventin")):a.length>15?(r.error_type="not-valid",r.message=(0,e.__)("Invalid phone number","eventin")):1==!a.match(/^\d+/)&&(r.error_type="not-valid",r.message=(0,e.__)("Only number allowed","eventin"));break;case"text":case"number":case"date":0===a.length&&(r.error_type="empty",r.message=(0,e.__)("Please fill the field","eventin"));break;case"radio":case"checkbox":n(i).is(":checked")||(r.error_type="not-selected",r.message=(0,e.__)("Please check the field","eventin"))}return r}(i,t.val(),r);"radio"===i?s=s.split("_radio_")[0]:"checkbox"===i&&(s=s.split("_checkbox_")[0]),n("."+s).html(""),void 0!==d&&"success"!==d.message?(n("."+s).html(d.message),n("#"+s).hasClass("attendee_error")||n("#"+s).addClass("attendee_error")):(n("#"+s).removeClass("attendee_error"),"radio"!=i&&"checkbox"!=i||t.parents(".etn-"+i+"-field-wrap").find(".etn-attendee-extra-fields").removeClass("attendee_error")),function(e){var t=n(".attendee_error").length,a=n(e);0===t?a.prop("disabled",!1).removeClass("attendee_submit_disable"):a.prop("disabled",!0).addClass("attendee_submit_disable")}(a)}))})),i.length>0?n(a).prop("disabled",!0).addClass("attendee_submit_disable"):n(a).prop("disabled",!1).removeClass("attendee_submit_disable")}if(a.length>0&&n.each(a,(function(t,a){var i=this;let r=n(a).data("start-date");var s=new Date(r).getTime();let d=setInterval((function(){var t=(new Date).getTime(),r=s-t,l=Math.floor(r/864e5),o=Math.floor(r%864e5/36e5),c=Math.floor(r%36e5/6e4),_=Math.floor(r%6e4/1e3);n(a).find(".day-count").html(l),n(a).find(".hr-count").html(o),n(a).find(".min-count").html(c),n(a).find(".sec-count").html(_),r<0&&(clearInterval(d),n(i).html((0,e.__)("Expired","eventin")))}),1e3)})),n(".attr-nav-pills>li>a").first().trigger("click"),n(document).on("click",".etn-tab-a",(function(e){e.preventDefault(),n(this).parents(".etn-tab-wrapper").find(".etn-tab").removeClass("tab-active"),n(this).parents(".etn-tab-wrapper").find(".etn-tab[data-id='"+n(this).attr("data-id")+"']").addClass("tab-active"),n(this).parents(".etn-tab-wrapper").find(".etn-tab-a").removeClass("etn-active"),n(this).parent().find(".etn-tab-a").addClass("etn-active")})),n(".attendee_submit").prop("disabled",!0).addClass("attendee_submit_disable"),n(".attende_form").submit((function(){n(".attendee_submit").prop("disabled",!0).addClass("attendee_submit_disable")})),n(".attendee_update_submit").length>0&&s(r(!0),".attendee_update_submit"),n(".attendee_submit").length>0&&s(r(!1),".attendee_submit"),n(".etn_event_inline_form").length){function _(e,t){let a=n(".etn-event-archive-wrap");const i=new URL(window.location);i.searchParams.set(t,e.value),window.history.pushState({},"",i);const r=new URLSearchParams(window.location.search);let s=r.get("etn_categorys"),d=r.get("etn_event_location"),l=r.get("etn_event_date_range"),o=r.get("etn_event_will_happen"),c=r.get("s");if(null!==c&&c.length||null!==d&&d.length||null!==s&&s.length||null!==l&&l.length||null!==o&&o.length){a.parents(".etn_search_item_container").find(".etn_event_ajax_preloader").addClass("loading");let e={action:"etn_event_ajax_get_data",etn_categorys:s,etn_event_location:d,etn_event_date_range:l,etn_event_will_happen:o,s:c},t=0;jQuery.ajax({url:localized_data_obj.ajax_url,data:e,method:"POST",beforeSend:function(){a.parents(".etn_search_item_container").find(".etn_event_ajax_preloader").addClass("loading"),t++,n(".etn-container").find(".etn-loader").each((function(){n(this).addClass("activate")}))},success:function(e){a.parents(".etn_search_item_container").find(".etn_event_ajax_preloader").removeClass("loading"),n(".etn-container").find(".etn-loader").each((function(){n(this).removeClass("activate")})),n(".etn_search_item_container").find(".etn-event-wrapper").html(e)},complete:function(){t--,t<=0&&a.parents(".etn_search_item_container").find(".etn_event_ajax_preloader").removeClass("loading")}})}}0===n(".etn-event-archive-wrap").length&&n(".etn-event-wrapper").before('<div class="etn_event_ajax_preloader"><div class="lds-dual-ring"></div></div>'),["etn_event_location","etn_categorys","etn_event_date_range","etn_event_will_happen"].map((e=>{n(`[name="${e}"]`).length&&n(e).on("change",(function(t){_(this,e)}))})),n(".etn_event_inline_form").find('[name="s"]').length&&n(".etn_event_inline_form").find('[name="s"]').on("keyup",(function(e){_(this,"s")})),n('select[name="etn_event_location"]').length>0&&n('select[name="etn_event_location"]').change((function(){_(this,"etn_event_location")})),n('select[name="etn_categorys"]').length>0&&n('select[name="etn_categorys"]').change((function(){_(this,"etn_categorys")})),n('select[name="etn_event_date_range"]').length>0&&n('select[name="etn_event_date_range"]').change((function(){_(this,"etn_event_date_range")}))}n(".etn-recurring-widget .etn-recurring-header").click((function(){n(".etn-recurring-widget").removeClass("active").addClass("no-active").find(".etn-zoom-event-notice").slideUp(),n(this).parents(".recurring-content").hasClass("active")?n(this).parents(".recurring-content").removeClass("active").find(".etn-form-wrap").slideUp():(n(".etn-recurring-widget .recurring-content.active .etn-form-wrap").slideUp(),n(".etn-recurring-widget .recurring-content.active").removeClass("active"),n(this).parents(".recurring-content").addClass("active").find(".etn-form-wrap").slideDown(),n(this).parents(".etn-recurring-widget").addClass("active").removeClass("no-active").find(".etn-zoom-event-notice").slideDown())})),n(document).mouseup((function(e){var t=n(".etn-recurring-widget");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("no-active")})),n(document).ready((function(){var e=n(".etn-recurring-widget").length;n(".etn-recurring-widget").slice(0,3).show(),e<=3&&n("#seeMore").fadeOut(),n("body").on("click touchstart","#seeMore",(function(e){e.preventDefault(),n(".etn-recurring-widget:hidden").slice(0,3).slideDown(),0==n(".etn-recurring-widget:hidden").length&&n("#seeMore").fadeOut()}))}));var d=n(".etn-single-event-ticket-wrap");d.length>0&&n.each(d,((t,a)=>{!function(t,n){let a=n.find(".etn-event-form-parent");if(void 0!==a){let e=0;a.each((function(n){let a=t(this).data("etn_uid");var i=t(this).data("etn_uid",a),r=i.find(".variations_"+e),s=r.find(".etn-single-ticket-item"),d=s.length;if(void 0!==d&&1==d){var l=parseInt(i.find(".ticket_0").data("etn_min_ticket"));null!=l&&(i.find(".ticket_0").val(l),_(i,s,r))}s.each((function(e){var n=i.find(".etn_ticket_variation");c(n,e,t(this)),_(t(this),s,r),i.find(".etn_ticket_variation").on("keyup",(function(){let a=t(this);c(n,e,a)}))})),s.find(".qt-btn").on("click",(function(){var e=t(this),n=e.closest(".etn-quantity").find("input.etn_ticket_variation"),a=e.data("key"),d=s.parent(".variation_"+a);n.val(((t,n)=>Math.max(0,+n+1*e.data("multi")))),c(d,a,t(this)),_(i,s,r)})),s.find(".etn_ticket_variation").on("keyup",(function(){_(i,s,r)})),e++}))}var i=n.find("#etn-st-client-fname"),r=n.find("#etn-st-client-lname"),s=n.find("#etn-st-client-email"),d=n.find(".etn-add-to-cart-block");const l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var o=[i,r,s];function c(e,n,a=null){var i=t(".ticket_"+n),r=parseInt(i.data("etn_min_ticket")),s=parseInt(i.data("etn_max_ticket")),d=parseInt(i.data("etn_current_stock")),l=(parseInt(i.data("etn_cart_limit")),i.data("etn_cart_limit_message"),e.find(".show_message_"+n)),o=i.val();d<s&&(s=d),e.parents(".etn-single-ticket-item").next(".show_message").html("");let c=e,_=d;if(c.length>1&&(c=a,_=parseInt(c.data("etn_current_stock"))),parseInt(c.val())>_)return c.val("").val(_),void l.html("").html(c.data("stock_limit"));if(l.html(""),0!=s&&(0!=r||0!=s)){var m=a.siblings(".ticket_"+n).data("qty_message");o>=r&&o<=s?l.html(""):(i.val()>s&&(i.val(s),l.html(m)),i.val()<r&&i.val(r))}}function _(e,n,a){const i=t(".etn-event-form-parent.etn-ticket-variation");let r=i.data("decimal-number-points"),s=i.data("thousand-separator"),d=i.data("decimal-separator");null==r&&(r=2);const l=new Intl.NumberFormat(void 0,{minimumFractionDigits:r});var o=0,c=0,_=n.length,m="etn-add-to-cart-block";for(let e=0;e<_;e++){var h=parseInt(a.find(".ticket_"+e).val()),v=parseFloat(a.find(".ticket_"+e).data("price")).toFixed(r)*h,u=l.format(v).replace(/,/g,s).replace(/\./g,d);n.find("._sub_total_"+e).text(u),o+=v,c+=h}const f=l.format(o).replace(/,/g,s).replace(/\./g,d);a.find(".variation_total_price").html(f).val(f),a.find(".variation_total_qty").html(c).val(c),a.find(".variation_picked_total_qty").val(c),c>0?(t("."+m).removeAttr("disabled").removeClass("disabled"),n.find(".etn_ticket_variation").removeClass("variation_qty_error")):(e.find("."+m).attr("disabled","disabled").addClass("disabled"),n.find(".etn_ticket_variation").addClass("variation_qty_error"));const p=e.find("#etn-st-client-fname"),g=e.find("#etn-st-client-lname"),b=e.find("#etn-st-client-email");(p.length>0||g.length>0||b.length>0)&&(""===p.val()||""===g.val()||""===b.val()?e.find("."+m).attr("disabled","disabled").addClass("disabled"):e.find("."+m).removeAttr("disabled").removeClass("disabled"))}t.each(o,(function(a,o){t(o).on("keyup",(function(){!function(e,t,n,a){(e.length>0||t.length>0||n.length>0)&&(""==e.val()||""==t.val()||""==n.val()?a.attr("disabled","disabled").addClass("disabled"):a.removeAttr("disabled").removeClass("disabled"))}(i,r,s,d),n.find(".client_fname_error").html(""),n.find(".client_lname_error").html(""),n.find(".client_email_error").html(""),""==i.val()&&n.find(".client_fname_error").html((0,e.__)("Please fill the field","eventin")),""==r.val()&&n.find(".client_lname_error").html((0,e.__)("Please fill the field","eventin")),""==s.val()?n.find(".client_email_error").html((0,e.__)("Please fill the field","eventin")):0==l.test(String(s.val()).toLowerCase())&&n.find(".client_email_error").html((0,e.__)("Email is not valid","eventin"))}))}))}(n,n(a))}));const l=n(".etn-ticket-single-variation-title"),o=n(".etn-attendee-form-wrap");n.each(l,((e,t)=>{n(t).click((()=>{const e=n(t).data("ticket_name");n(t).toggleClass("etn-attendee-ticket-collapsed"),n.each(o,((t,a)=>{n(a).data("ticket_name")==e&&n(a).slideToggle()}))}))}));const c=document.getElementById("etn_ticket_download_btn");c&&c?.addEventListener("click",t),n("#purchase_ticket_form").on("submit",(()=>{n(".etn-add-to-cart-block").attr("disabled","disabled").addClass("disabled button--loading")}))}))})();